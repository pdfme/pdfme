"use strict";(self.webpackChunk_pdfme_website=self.webpackChunk_pdfme_website||[]).push([[964],{4454:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"expression","title":"Expression","description":"Expressions are a feature that evaluates expressions enclosed in {}.","source":"@site/docs/expression.md","sourceDirName":".","slug":"/expression","permalink":"/docs/expression","draft":false,"unlisted":false,"editUrl":"https://github.com/pdfme/pdfme/tree/main/website/docs/expression.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Tables with Dynamic Data","permalink":"/docs/tables"},"next":{"title":"Headers and Footers","permalink":"/docs/headers-and-footers"}}');var r=n(4848),l=n(8453);const a={},d="Expression",t={},o=[{value:"Use Cases",id:"use-cases",level:2},{value:"Displaying Date or Page Numbers in Footer and Header",id:"displaying-date-or-page-numbers-in-footer-and-header",level:3},{value:"Reusing User Input for Display",id:"reusing-user-input-for-display",level:3},{value:"Managing Values in One Place",id:"managing-values-in-one-place",level:3},{value:"How to Use, Specifications",id:"how-to-use-specifications",level:2},{value:"How to Use Expressions",id:"how-to-use-expressions",level:3},{value:"Limitations and Security of Expressions",id:"limitations-and-security-of-expressions",level:3},{value:"Variables That Can Be Used Within Expressions",id:"variables-that-can-be-used-within-expressions",level:3},{value:"Examples of Expressions",id:"examples-of-expressions",level:3}];function c(e){const s={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"expression",children:"Expression"})}),"\n",(0,r.jsxs)(s.p,{children:["Expressions are a feature that evaluates expressions enclosed in ",(0,r.jsx)(s.code,{children:"{}"}),".",(0,r.jsx)(s.br,{}),"\n","The simplest example is ",(0,r.jsx)(s.code,{children:"{1+1}"}),", which evaluates to ",(0,r.jsx)(s.code,{children:"2"}),"."]}),"\n",(0,r.jsx)(s.p,{children:"In pdfme, expressions can be used not only for simple calculations but also by utilizing user input."}),"\n",(0,r.jsx)(s.p,{children:"For example, consider the following template:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'{\n    "schemas": [\n        [\n            {\n                "name": "field1",\n                "type": "text",\n                "content": "Hello world",\n                ...\n                "readOnly": false,\n            },\n            {\n                "name": "field2",\n                "type": "text",\n                "content": "{field1} !", // Expression!\n                ...\n                "readOnly": true,\n            }\n        ]\n    ],\n    "basePdf": { "width": 210, "height": 297, "padding": [20, 10, 20, 10] },\n    "pdfmeVersion": "5.0.0"\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"field2"})," will have the value ",(0,r.jsx)(s.code,{children:"Hello world !"}),". The expression ",(0,r.jsx)(s.code,{children:"{field1} !"})," is evaluated like below:"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"expression",src:n(4839).A+"",width:"2126",height:"1092"})}),"\n",(0,r.jsxs)(s.p,{children:["This means that ",(0,r.jsx)(s.code,{children:"{field1}"})," is replaced with the value of ",(0,r.jsx)(s.code,{children:"field1"}),", and ",(0,r.jsx)(s.code,{children:"!"})," is appended to it."]}),"\n",(0,r.jsx)(s.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,r.jsx)(s.p,{children:"The following use cases can be considered:"}),"\n",(0,r.jsx)(s.h3,{id:"displaying-date-or-page-numbers-in-footer-and-header",children:"Displaying Date or Page Numbers in Footer and Header"}),"\n",(0,r.jsxs)(s.p,{children:["For example, you might want to display the creation date of the PDF in the header or display page numbers in the footer. Although headers and footers are explained in detail ",(0,r.jsx)(s.a,{href:"/docs/headers-and-footers",children:"here"}),", expressions can also be used in the ",(0,r.jsx)(s.code,{children:"staticSchema"})," used for headers and footers."]}),"\n",(0,r.jsx)(s.h3,{id:"reusing-user-input-for-display",children:"Reusing User Input for Display"}),"\n",(0,r.jsxs)(s.p,{children:["You can reuse values entered by the user for display. For instance, if there are fields ",(0,r.jsx)(s.code,{children:"firstName"})," and ",(0,r.jsx)(s.code,{children:"lastName"})," entered by the user, you can concatenate and display them as ",(0,r.jsx)(s.code,{children:'{firstName + " " + lastName}'}),"."]}),"\n",(0,r.jsx)(s.p,{children:"This improves usability by eliminating the need for users to enter similar information multiple times."}),"\n",(0,r.jsx)(s.h3,{id:"managing-values-in-one-place",children:"Managing Values in One Place"}),"\n",(0,r.jsxs)(s.p,{children:["By using expressions, you can manage values in one place. For example, if there is a value ",(0,r.jsx)(s.code,{children:"taxRate"}),", you can simply change ",(0,r.jsx)(s.code,{children:"taxRate"}),", and it will be reflected in all places where it is used, making changes easier."]}),"\n",(0,r.jsx)(s.h2,{id:"how-to-use-specifications",children:"How to Use, Specifications"}),"\n",(0,r.jsx)(s.p,{children:"After understanding the overview and use cases, here is an explanation of the specific usage and specifications."}),"\n",(0,r.jsx)(s.h3,{id:"how-to-use-expressions",children:"How to Use Expressions"}),"\n",(0,r.jsxs)(s.p,{children:["Expressions can be used in the ",(0,r.jsx)(s.code,{children:"schema"})," property when the ",(0,r.jsx)(s.code,{children:"readOnly"})," property is set to ",(0,r.jsx)(s.code,{children:"true"}),". From the designer, you can set ",(0,r.jsx)(s.code,{children:"readOnly"})," by unchecking the ",(0,r.jsx)(s.code,{children:"Editable"})," checkbox."]}),"\n",(0,r.jsxs)(s.p,{children:["As shown in the GIF below, you can start using expressions by unchecking the ",(0,r.jsx)(s.code,{children:"Editable"})," checkbox."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"Change ReadOnly",src:n(4387).A+"",width:"800",height:"481"})}),"\n",(0,r.jsx)(s.p,{children:"In other words, fields where expressions are used cannot be edited by the user."}),"\n",(0,r.jsx)(s.h3,{id:"limitations-and-security-of-expressions",children:"Limitations and Security of Expressions"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Only Arrow Functions are supported."}),"\n",(0,r.jsxs)(s.li,{children:["The ",(0,r.jsx)(s.code,{children:"eval"})," function cannot be used."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"prototype"})," cannot be used."]}),"\n",(0,r.jsxs)(s.li,{children:["Only the following global objects and their methods can be used:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Math"}),"\n",(0,r.jsx)(s.li,{children:"String"}),"\n",(0,r.jsx)(s.li,{children:"Number"}),"\n",(0,r.jsx)(s.li,{children:"Boolean"}),"\n",(0,r.jsx)(s.li,{children:"Array"}),"\n",(0,r.jsx)(s.li,{children:"Object"}),"\n",(0,r.jsx)(s.li,{children:"Date"}),"\n",(0,r.jsx)(s.li,{children:"JSON"}),"\n",(0,r.jsx)(s.li,{children:"isNaN"}),"\n",(0,r.jsx)(s.li,{children:"parseFloat"}),"\n",(0,r.jsx)(s.li,{children:"parseInt"}),"\n",(0,r.jsx)(s.li,{children:"decodeURI"}),"\n",(0,r.jsx)(s.li,{children:"decodeURIComponent"}),"\n",(0,r.jsx)(s.li,{children:"encodeURI"}),"\n",(0,r.jsx)(s.li,{children:"encodeURIComponent"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["For detailed specifications, refer to ",(0,r.jsx)(s.a,{href:"https://github.com/pdfme/pdfme/blob/main/packages/common/src/expression.ts",children:"this implementation"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"variables-that-can-be-used-within-expressions",children:"Variables That Can Be Used Within Expressions"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"User Input Values"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Values entered in ",(0,r.jsx)(s.a,{href:"/docs/supported-features#multivariable-text",children:"Multivariable Text"})," or ",(0,r.jsx)(s.a,{href:"/docs/supported-features#table",children:"Table"})," that can be parsed as JSON can be used after parsing."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["Values of Other ",(0,r.jsx)(s.code,{children:"readOnly"})," Fields"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["If an expression is used in the value of another ",(0,r.jsx)(s.code,{children:"readOnly"})," field, the value after the expression is evaluated is used."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Embedded Variables"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"currentPage"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"totalPages"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"date (YYYY/MM/DD)"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"dateTime (YYYY/MM/DD HH:mm)"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"examples-of-expressions",children:"Examples of Expressions"}),"\n",(0,r.jsx)(s.p,{children:"The following are examples of expressions that can be used:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"subtotal:"})," ",(0,r.jsx)(s.code,{children:"'{orders.reduce((sum, item) => sum + parseFloat(item[1] || 0) * parseFloat(item[2] || 0), 0)}'"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"tax:"})," ",(0,r.jsx)(s.code,{children:"'{Number(subtotalInput) * Number(tax.rate) / 100}'"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"total:"})," ",(0,r.jsx)(s.code,{children:"'${Number(subtotal) + Number(tax)}'"})]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},4387:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/expression-change-readOnly-66cf6ef614ed110f4c394db84e49c905.gif"},4839:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/expression-7dba0368ea99e7aa1c2057d92cbfd267.png"},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>d});var i=n(6540);const r={},l=i.createContext(r);function a(e){const s=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(l.Provider,{value:s},e.children)}}}]);