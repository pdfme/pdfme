<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Webpack App</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
  </head>
  <body style="margin: 0">
    <div>
      <a href="./TemplateDesigner.html">TemplateDesigner</a>
      /
      <a href="./Form.html">Form</a>
      /
      <a href="./Viewer.html">Viewer</a>
    </div>
    <div>
      <button onclick="fetchTemplates()">fetchTemplates</button>
      /
      <button onclick="setTemplate()">setTemplate</button>
    </div>
  </body>
  <script>
    function fetchTemplates() {
      fetch('https://api.labelmake.jp/v1/templates?team=labelmake', {
        method: 'GET',
        headers: {
          'X-Labelmake-API-Token': 'c02ee5a0-2590-11ec-bcde-1b4557d524f3',
        },
      })
        .then((response) => response.json())
        .then((json) => {
          alert('saved');
          localStorage.setItem('templates', JSON.stringify(json));
        });
    }

    function setTemplate() {
      const input = window.prompt('enter index');
      const templates = JSON.parse(localStorage.getItem('templates'));
      let template = null;
      if (isNaN(input)) {
        template = templates.find((t) => t.id === input);
      } else {
        template = templates[input];
      }
      if (!template) {
        alert('invalid input');
        return;
      }
      alert('set');
      localStorage.setItem('template', JSON.stringify(template));
    }
  </script>
</html>
